(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b47ec044"],{"0a49":function(t,e,i){var a=i("9b43"),s=i("626a"),l=i("4bf8"),n=i("9def"),o=i("cd1c");t.exports=function(t,e){var i=1==t,r=2==t,c=3==t,u=4==t,d=6==t,f=5==t||d,h=e||o;return function(e,o,p){for(var m,b,g=l(e),v=s(g),k=a(o,p,3),_=n(v.length),x=0,y=i?h(e,_):r?h(e,0):void 0;_>x;x++)if((f||x in v)&&(m=v[x],b=k(m,x,g),t))if(i)y[x]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:y.push(m)}else if(u)return!1;return d?-1:c||u?u:y}}},1169:function(t,e,i){var a=i("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"297d":function(t,e,i){},"7c3b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{staticStyle:{"font-size":"18px"}},[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 任务标题："+t._s(t.title))])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-input",{staticClass:"handle-input",attrs:{placeholder:"用户昵称(支持模糊查询)"},model:{value:t.nickName,callback:function(e){t.nickName=e},expression:"nickName"}}),i("el-button",{staticClass:"search jianju",attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("搜索")]),i("el-button",{staticClass:"search",attrs:{type:"primary",icon:"search"},on:{click:t.newsearch}},[t._v("重置")])],1),i("div",{staticClass:"handle-box"}),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"100"}}),i("el-table-column",{attrs:{prop:"logo",label:"任务图片",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"imgbody"},t._l(JSON.parse(e.row.images),function(e){return i("img",{staticClass:"taskimg",attrs:{src:e},on:{click:t.clickimg}})}))]}}])}),i("el-table-column",{attrs:{prop:"nickName",label:"用户昵称",width:"120"}}),i("el-table-column",{attrs:{prop:"avatarUrl",label:"用户头像",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"logo",attrs:{src:t.row.avatarUrl}})]}}])}),i("el-table-column",{attrs:{prop:"explain",label:"任务描述",width:"220"}}),t._v("p\n      "),i("el-table-column",{attrs:{prop:"create_time",label:"上传时间",width:"160"}}),i("el-table-column",{attrs:{prop:"state",label:"审核状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(0==e.row.state?"未审核":1==e.row.state?"审核成功":"审核失败"))])]}}])},[t._v("p\n      ")]),i("el-table-column",{attrs:{label:"操作",width:"270",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return 0==e.row.state?[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){t.directpass(e.$index,e.row)}}},[t._v("审核通过")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){t.handleDelete(e.$index,e.row)}}},[t._v("审核不通过")])]:void 0}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.datapages},on:{"current-change":t.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:"预览图片",visible:t.imgVisible,width:"25%"},on:{"update:visible":function(e){t.imgVisible=e}}},[i("img",{staticClass:"yulan",attrs:{src:t.yulanimg}})]),i("el-dialog",{attrs:{title:"审核不通过",visible:t.delVisible,width:"30%"},on:{"update:visible":function(e){t.delVisible=e}}},[i("el-form",{ref:"form",attrs:{"label-width":"150px"}},[i("el-form-item",{attrs:{label:"审核不通过原因"}},[i("el-select",{staticClass:"handle-select mr0 changdu",attrs:{placeholder:"审核不成功"},model:{value:t.nopasstext,callback:function(e){t.nopasstext=e},expression:"nopasstext"}},[i("el-option",{key:"1",attrs:{label:"其他",value:"其他"}}),i("el-option",{key:"2",attrs:{label:"图片不符合",value:"图片不符合"}}),i("el-option",{key:"3",attrs:{label:"该任务不加分",value:"该任务不加分"}}),i("el-option",{key:"4",attrs:{label:"未达到要求",value:"未达到要求"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmdelete}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"审核通过",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.score,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"合格奖励积分"}},[i("el-input",{model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1)],1)},s=[],l=(i("96cf"),i("1da1")),n=(i("7f7f"),i("d25f"),{name:"basetable",data:function(){return{url:"./static/vuetable.json",tableData:[],title:"这是任务标题",limit_id:null,cur_page:1,multipleSelection:[],del_list:[],editVisible:!1,form:{},idx:-1,delVisible:!1,imgVisible:!1,yulanimg:null,deleteid:"",datapages:0,score:1,nopasstext:"其他",nickName:""}},created:function(){},activated:function(){this.init()},computed:{data:function(){var t=this;return this.tableData.filter(function(e){for(var i=0;i<t.del_list.length;i++)if(e.name===t.del_list[i].name){!0;break}})}},methods:{handleCurrentChange:function(t){this.cur_page=t,this.getData(t)},init:function(){this.limit_id=this.$route.query.id||"",this.title=this.$route.query.title||"任务标题",this.limit_id?this.getData():console.log("id不存在")},getData:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="configure/limittasks/usertaskslist",i=localStorage.getItem("token"),a={limit_id:this.limit_id,pages:this.cur_page,nickName:this.nickName,state:0,token:i},t.prev=3,t.next=6,this.$axios.post(e,a);case 6:s=t.sent,"200"==s.status?(this.tableData=s.data.data,this.datapages=s.data.countnumber):(this.$message({message:s.message,type:"error"}),console.log(s.message)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[3,10]])}));function e(){return t.apply(this,arguments)}return e}(),search:function(){this.getData()},newsearch:function(){this.nickName="",this.cur_page=1,this.datapages=0,this.getData()},directpass:function(t,e){var i=this;console.log("点击编辑",e),this.idx=t;var a=this.tableData[t];this.form=a;var s=this.form;s.state=1,this.$set(this.tableData,this.idx,this.form),this.editVisible=!1;var l={result:"任务合格"};l.id=s.id,l.limit_id=this.limit_id,l.state=1,l.token=localStorage.getItem("token"),console.log("提交修改信息",l),this.$axios.post("configure/limittasks/audittask",l).then(function(t){console.log("直接审核通过返回数据",t),i.$message.success("操作成功")})},handleDelete:function(t,e){this.deleteid=e.id,this.idx=t;var i=this.tableData[t];this.form=i,this.delVisible=!0},confirmdelete:function(){var t=this,e=this.form;e.state=2,this.$set(this.tableData,this.idx,this.form),this.delVisible=!1;var i={};i.limit_id=this.limit_id,i.result=this.nopasstext,i.id=e.id,i.state=2,i.token=localStorage.getItem("token"),console.log("提交审核不通过信息",i),this.$message.success("操作成功"),this.$axios.post("configure/limittasks/audittask",i).then(function(e){console.log("审核返回数据",e),t.$message.success("操作成功")})},clickimg:function(t){console.log("点击图片",t.target.src),this.imgVisible=!0,this.yulanimg=t.target.src},handleEdit:function(t,e){console.log("点击编辑",e),this.idx=t;var i=this.tableData[t];this.form=i,this.editVisible=!0},saveEdit:function(){console.log("审核通过"),console.log(this.form);var t=this.form;t.state=1,this.$set(this.tableData,this.idx,this.form),this.editVisible=!1;var e={};e.score=this.score,e.result="任务合格",e.id=t.id,e.taskstate=1,e.user_id=t.user_id,e.token=localStorage.getItem("token"),console.log("提交修改信息",e),this.$message.success("操作成功"),this.$axios.post("configure/tasks/handletask",e).then(function(t){console.log("修改信息返回数据",t)})}}}),o=n,r=(i("cb83"),i("2877")),c=Object(r["a"])(o,a,s,!1,null,"76297f49",null);c.options.__file="Auditlimittask.vue";e["default"]=c.exports},"7f7f":function(t,e,i){var a=i("86cc").f,s=Function.prototype,l=/^\s*function ([^ (]*)/,n="name";n in s||i("9e1e")&&a(s,n,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},cb83:function(t,e,i){"use strict";var a=i("297d"),s=i.n(a);s.a},cd1c:function(t,e,i){var a=i("e853");t.exports=function(t,e){return new(a(t))(e)}},d25f:function(t,e,i){"use strict";var a=i("5ca1"),s=i("0a49")(2);a(a.P+a.F*!i("2f21")([].filter,!0),"Array",{filter:function(t){return s(this,t,arguments[1])}})},e853:function(t,e,i){var a=i("d3f4"),s=i("1169"),l=i("2b4c")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),a(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?Array:e}}}]);